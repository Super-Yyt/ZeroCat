/**
 * @fileoverview 事件模型定义和相关常量
 */

/**
 * 事件类型定义
 * @enum {number}
 */
export const EventTypes = {
  // 用户事件 (1-99)
  USER_REGISTER: 1,
  USER_LOGIN: 2,
  USER_LOGOUT: 3,
  USER_PROFILE_UPDATE: 4,
  USER_PASSWORD_CHANGE: 5,
  USER_EMAIL_CHANGE: 6,
  USER_AVATAR_CHANGE: 7,
  USER_ACCOUNT_DELETE: 8,
  USER_ACCOUNT_SUSPEND: 9,
  USER_ACCOUNT_RESTORE: 10,

  USER_SETTINGS_CHANGE: 20,
  USER_NOTIFICATION_SETTINGS: 21,
  USER_PRIVACY_SETTINGS: 22,

  // 项目事件 (100-199)
  PROJECT_CREATE: 100,
  PROJECT_UPDATE: 101,
  PROJECT_DELETE: 102,
  PROJECT_VISIBILITY_CHANGE: 103,
  PROJECT_OWNERSHIP_TRANSFER: 104,

  PROJECT_VIEW: 110,
  PROJECT_STAR: 111,
  PROJECT_UNSTAR: 112,
  PROJECT_LIKE: 113,
  PROJECT_UNLIKE: 114,
  PROJECT_FORK: 115,
  PROJECT_DOWNLOAD: 116,
  PROJECT_SHARE: 117,

  PROJECT_COLLABORATOR_INVITE: 120,
  PROJECT_COLLABORATOR_JOIN: 121,
  PROJECT_COLLABORATOR_LEAVE: 122,
  PROJECT_COLLABORATOR_REMOVE: 123,
  PROJECT_PERMISSION_CHANGE: 124,

  PROJECT_COMMIT: 130,
  PROJECT_BRANCH_CREATE: 131,
  PROJECT_BRANCH_DELETE: 132,
  PROJECT_MERGE: 133,
  PROJECT_RELEASE: 134,

  // 社交事件 (200-299)
  USER_FOLLOW: 200,
  USER_UNFOLLOW: 201,
  USER_BLOCK: 202,
  USER_UNBLOCK: 203,

  USER_MENTION: 210,
  USER_DIRECT_MESSAGE: 211,

  // 内容事件 (300-399)
  COMMENT_CREATE: 300,
  COMMENT_UPDATE: 301,
  COMMENT_DELETE: 302,
  COMMENT_LIKE: 303,
  COMMENT_UNLIKE: 304,
  COMMENT_REPLY: 305,

  COLLECTION_CREATE: 320,
  COLLECTION_UPDATE: 321,
  COLLECTION_DELETE: 322,
  COLLECTION_ADD_ITEM: 323,
  COLLECTION_REMOVE_ITEM: 324,

  // 系统事件 (500-599)
  SYSTEM_CONFIG_CHANGE: 500,
  SYSTEM_MAINTENANCE_START: 501,
  SYSTEM_MAINTENANCE_END: 502,
  SYSTEM_BACKUP: 503,
  SYSTEM_RESTORE: 504,

  SYSTEM_ERROR: 510,
  SYSTEM_PERFORMANCE_ISSUE: 511,
  API_RATE_LIMIT_EXCEEDED: 512,

  // 安全事件 (600-699)
  SECURITY_LOGIN_ATTEMPT_FAILED: 600,
  SECURITY_PASSWORD_RESET: 601,
  SECURITY_SUSPICIOUS_ACTIVITY: 602,
  SECURITY_PERMISSION_CHANGE: 603,
  SECURITY_API_KEY_GENERATED: 604,
  SECURITY_API_KEY_REVOKED: 605
};

/**
 * 目标类型枚举
 * @enum {string}
 */
export const TargetTypes = {
  USER: 'user',
  PROJECT: 'project',
  COMMENT: 'comment',
  TOPIC: 'topic',
  POST: 'post',
  SYSTEM: 'system',
  COLLECTION: 'collection',
  API: 'api'
};

/**
 * 事件类型按分类的映射
 * 用于按类别检索事件类型
 */
export const EventCategories = {
  USER: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 20, 21, 22],
  PROJECT: [100, 101, 102, 103, 104, 110, 111, 112, 113, 114, 115, 116, 117, 120, 121, 122, 123, 124, 130, 131, 132, 133, 134],
  SOCIAL: [200, 201, 202, 203, 210, 211],
  CONTENT: [300, 301, 302, 303, 304, 305, 320, 321, 322, 323, 324],
  SYSTEM: [500, 501, 502, 503, 504, 510, 511, 512],
  SECURITY: [600, 601, 602, 603, 604, 605]
};

/**
 * 事件中需要记录敏感数据的类型
 * 这些事件在记录时应额外关注隐私保护
 */
export const SensitiveEventTypes = [
  EventTypes.USER_PASSWORD_CHANGE,
  EventTypes.USER_EMAIL_CHANGE,
  EventTypes.SECURITY_LOGIN_ATTEMPT_FAILED,
  EventTypes.SECURITY_PASSWORD_RESET,
  EventTypes.SECURITY_SUSPICIOUS_ACTIVITY,
  EventTypes.SECURITY_API_KEY_GENERATED
];

/**
 * 需要发送实时通知的事件类型
 */
export const RealtimeNotificationEvents = [
  EventTypes.PROJECT_COMMENT_CREATE,
  EventTypes.PROJECT_STAR,
  EventTypes.PROJECT_FORK,
  EventTypes.USER_FOLLOW,
  EventTypes.USER_MENTION,
  EventTypes.COMMENT_REPLY
];

export default {
  EventTypes,
  TargetTypes,
  EventCategories,
  SensitiveEventTypes,
  RealtimeNotificationEvents
};